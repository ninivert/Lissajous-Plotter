{"version":3,"sources":["../../src/scripts/controls.js"],"names":["CONTROLS","DOM","document","getElementById","init","forms","Object","keys","i","length","call","oninput","callback","bind","onclick","onchange","onsubmit","count","input","createElement","type","id","min","max","step","value","COUNT","label","innerHTML","htmlFor","children","countlabel","appendChild","speed","BASESPEED","speedlabel","clear","save","parseInt","console","log","ctx","clearRect","WIDTH","HEIGHT","link","download","href","canvas","toDataURL","body","setAttribute","click","removeChild"],"mappings":"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","file":"controls.js","sourcesContent":["/*\r\nNote: Every form is for ONE option\r\nthe form ID should match the initalizer CONTROLS.init.{name}\r\nand the oninput callback CONTROLS.callback.{name}\r\n*/\r\n\r\nfunction CONTROLS() {}\r\n\r\nCONTROLS.DOM = {\r\n\t// All the container form elements\r\n\t'forms': {\r\n\t\t'count': document.getElementById('count'),\r\n\t\t'speed': document.getElementById('speed'),\r\n\t\t// 'ratio': document.getElementById('ratio'),\r\n\t\t'clear': document.getElementById('clear'),\r\n\t\t'save': document.getElementById('save'),\r\n\t},\r\n\t// The child values, for reference\r\n\t'children': {\r\n\t}\r\n}\r\n\r\n//\r\n// Initalization\r\n//\r\n\r\nCONTROLS.init = function() {\r\n\t/*\r\n\tNote: Looping through all the individual initializers to call them all\r\n\tAlso add the callbacks and disable form submission\r\n\t*/\r\n\r\n\tlet forms = Object.keys(this.init)\r\n\r\n\tfor (let i=0; i<forms.length; i++) {\r\n\t\tthis.init[forms[i]].call(this)\r\n\t\tthis.DOM.forms[forms[i]].oninput = this.callback[forms[i]].bind(this)\r\n\t\tthis.DOM.forms[forms[i]].onclick = this.callback[forms[i]].bind(this)\r\n\t\t// onchange is for the checkboxes on mobile touch devices\r\n\t\tthis.DOM.forms[forms[i]].onchange = this.callback[forms[i]].bind(this)\r\n\t\tthis.DOM.forms[forms[i]].onsubmit = function() { return false }\r\n\t}\r\n}\r\n\r\nCONTROLS.init.count = function() {\r\n\tlet input = document.createElement('input')\r\n\tinput.type = 'range'\r\n\tinput.id = 'count-input'\r\n\tinput.min = 1\r\n\tinput.max = 20\r\n\tinput.step = 1\r\n\tinput.value = COUNT\r\n\r\n\tlet label = document.createElement('label')\r\n\tlabel.innerHTML = COUNT\r\n\tlabel.htmlFor = 'count-input'\r\n\r\n\tthis.DOM.children.count = input\r\n\tthis.DOM.children.countlabel = label\r\n\tthis.DOM.forms.count.appendChild(input)\r\n\tthis.DOM.forms.count.appendChild(label)\r\n}\r\n\r\nCONTROLS.init.speed = function() {\r\n\tlet input = document.createElement('input')\r\n\tinput.type = 'range'\r\n\tinput.id = 'speed-input'\r\n\tinput.min = 0\r\n\tinput.max = 0.1\r\n\tinput.step = (input.max - input.min)/100\r\n\tinput.value = BASESPEED\r\n\r\n\tlet label = document.createElement('label')\r\n\tlabel.innerHTML = BASESPEED\r\n\tlabel.htmlFor = 'speed-input'\r\n\r\n\tthis.DOM.children.speed = input\r\n\tthis.DOM.children.speedlabel = label\r\n\tthis.DOM.forms.speed.appendChild(input)\r\n\tthis.DOM.forms.speed.appendChild(label)\r\n}\r\n\r\n// CONTROLS.init.ratio = function() {\r\n// \tlet input = document.createElement('input')\r\n// \tinput.type = 'range'\r\n// \tinput.id = 'ratio-input'\r\n// \tinput.min = 0\r\n// \tinput.max = 2\r\n// \tinput.step = (input.max - input.min)/100\r\n// \tinput.value = RELSPEED\r\n\r\n// \tlet label = document.createElement('label')\r\n// \tlabel.innerHTML = RELSPEED\r\n// \tlabel.htmlFor = 'ratio-input'\r\n\r\n// \tthis.DOM.children.ratio = input\r\n// \tthis.DOM.children.ratiolabel = label\r\n// \tthis.DOM.forms.ratio.appendChild(input)\r\n// \tthis.DOM.forms.ratio.appendChild(label)\r\n// }\r\n\r\nCONTROLS.init.clear = function() {\r\n\tlet input = document.createElement('input')\r\n\tinput.type = 'button'\r\n\tinput.value = 'Clear'\r\n\r\n\tthis.DOM.children.clear = input\r\n\tthis.DOM.forms.clear.appendChild(input)\r\n}\r\n\r\nCONTROLS.init.save = function() {\r\n\tlet input = document.createElement('input')\r\n\tinput.type = 'button'\r\n\tinput.value = 'Save'\r\n\r\n\tthis.DOM.children.save = input\r\n\tthis.DOM.forms.save.appendChild(input)\r\n}\r\n\r\n//\r\n// Callbacks\r\n//\r\n\r\nCONTROLS.callback = {}\r\n\r\nCONTROLS.callback.count = function() {\r\n\tlet value = parseInt(this.DOM.children.count.value)\r\n\tconsole.log(value)\r\n\tCOUNT = value\r\n\tthis.DOM.children.countlabel.innerHTML = value\r\n\tinit()\r\n}\r\n\r\nCONTROLS.callback.speed = function() {\r\n\tlet value = this.DOM.children.speed.value\r\n\tBASESPEED = value\r\n\tthis.DOM.children.speedlabel.innerHTML = value\r\n\tinit()\r\n}\r\n\r\n// CONTROLS.callback.ratio = function() {\r\n// \tlet value = this.DOM.children.ratio.value\r\n// \tRELSPEED = value\r\n// \tthis.DOM.children.ratiolabel.innerHTML = value\r\n// \tinit()\r\n// }\r\n\r\nCONTROLS.callback.clear = function() {\r\n\tctx.clearRect(0, 0, WIDTH, HEIGHT)\r\n}\r\n\r\nCONTROLS.callback.save = function() {  \r\n\tlet link = document.createElement('a')\r\n\tlink.download = `lissajous.jpg`\r\n\tlink.href = canvas.toDataURL('image/png')\r\n\tdocument.body.appendChild(link)\r\n\tlink.setAttribute(\"type\", \"hidden\")\r\n\tlink.click()\r\n\tdocument.body.removeChild(link)\r\n}\r\n\r\n//\r\n// Start everything\r\n//\r\n\r\nCONTROLS.init()\r\n"]}